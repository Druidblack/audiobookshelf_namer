üìö **Audiobookshelf namer**

![1](https://github.com/Druidblack/audiobookshelf_namer/blob/main/img/1.jpg)
![2](https://github.com/Druidblack/audiobookshelf_namer/blob/main/img/2.jpg)

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –≤ Audiobookshelf

üöÄ **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞?**

**Audiobookshelf namer** ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–æ–ª–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –∫–Ω–∏–≥ –≤ Audiobookshelf.


* –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–≥–∏ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤,

* –ø—Ä–∏–≤–æ–¥–∏—Ç –∞–≤—Ç–æ—Ä–∞/–Ω–∞–∑–≤–∞–Ω–∏–µ –∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º—É –≤–∏–¥—É,

* –∏–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (FantLab, Google Books, Audible),

* –æ–±–Ω–æ–≤–ª—è–µ—Ç –æ–±–ª–æ–∂–∫–∏,

* –ø–æ–º–µ—á–∞–µ—Ç –∫–Ω–∏–≥–∏ –±–µ–∑ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö,

* –∏–∑–±–µ–≥–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º ABS,

* –≤–µ–¥—ë—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–π –ª–æ–≥,

* –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —á–µ—Ä–µ–∑ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ,

* –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Å–µ—Ä–≤–∏—Å –≤ —Ñ–æ–Ω–µ.

–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫ –ª—é–±–æ–π –≤–µ–ª–∏—á–∏–Ω—ã ‚Äî –æ—Ç —Å–æ—Ç–µ–Ω –¥–æ –¥–µ—Å—è—Ç–∫–æ–≤ —Ç—ã—Å—è—á –∫–Ω–∏–≥.


üß† **–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**

1Ô∏è‚É£ **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ç–µ–≥–æ–≤ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤**

–°–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç ```tagAlbum``` –∏ —É–º–µ–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç—ã:

* ```–ê–≤—Ç–æ—Ä. ¬´–ù–∞–∑–≤–∞–Ω–∏–µ¬ª```

* ```–ê–≤—Ç–æ—Ä ‚Äî –ù–∞–∑–≤–∞–Ω–∏–µ```

* ```–ê–≤—Ç–æ—Ä: "–ù–∞–∑–≤–∞–Ω–∏–µ"```

* ```–ù–∏–ª –ì–µ–π–º–∞–Ω, –¢–µ—Ä—Ä–∏ –ü—Ä–∞—Ç—á–µ—Ç—Ç. ¬´–î–æ–±—Ä—ã–µ –ø—Ä–µ–¥–∑–Ω–∞–º–µ–Ω–æ–≤–∞–Ω–∏—è¬ª```

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è:

**–ê–≤—Ç–æ—Ä(—ã)**

**–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏**

**–ß—Ç–µ—Ü (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç ```tagArtist```)**

–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç —Ç–µ–∫—É—â–∏—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.

2Ô∏è‚É£ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –≤–Ω–µ—à–Ω–∏—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

üîç –¶–µ–ø–æ—á–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤:
|    –ü–æ—Ä—è–¥–æ–∫     |     –ò—Å—Ç–æ—á–Ω–∏–∫    |
| ------- | ------- |
| 1 | FantLab |
| 2 | Google Books |
| 3 | Audible |

–í—Å—Ç—Ä–æ–µ–Ω—ã –∑–∞—â–∏—Ç—ã:

‚úî —É–º–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π (—É—á—ë—Ç —Ü–∏—Ñ—Ä, –æ—á–∏—Å—Ç–∫–∞ –æ—Ç —Å–ª—É–∂–µ–±–Ω—ã—Ö —Å–ª–æ–≤, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è)

‚úî —É—á—ë—Ç –≤–∞—Ä–∏–∞—Ü–∏–π –∏–º—ë–Ω –∞–≤—Ç–æ—Ä–æ–≤ (–ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤, –æ—Ç—á–µ—Å—Ç–≤–∞, —ë/–µ)

‚úî –ø–æ–ª–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–∂–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π

–ï—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–µ –¥–∞–ª –Ω–∞–¥—ë–∂–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ ‚Äî –∫–Ω–∏–≥–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Ç–µ–≥:

```–Ω–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö```

3Ô∏è‚É£ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±–ª–æ–∂–µ–∫** üìòüñºÔ∏è

* –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â—É—é –æ–±–ª–æ–∂–∫—É –∫–Ω–∏–≥–∏,

* —Å–∫–∞—á–∏–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞,

* —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä—ã,

* –æ–±–Ω–æ–≤–ª—è–µ—Ç –æ–±–ª–æ–∂–∫—É, –µ—Å–ª–∏ –Ω–æ–≤–∞—è –±–æ–ª—å—à–µ –Ω–∞ 5% –∏ –±–æ–ª–µ–µ.

4Ô∏è‚É£ **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏ ABS**

–í–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ c–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

* –∂–¥—ë—Ç –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º,

* –æ—Å—Ç–∞–Ω–æ–≤–ª–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É, –µ—Å–ª–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—á–∞–ª–æ—Å—å –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã,

* –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∑–∞–¥–∞—á.

5Ô∏è‚É£ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã**

–°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ñ–∞–π–ª (abs_metadata_state.json). –ö—ç—à —Ö—Ä–∞–Ω–∏—Ç:

* –±—ã–ª–∏ –ª–∏ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã —Ç–µ–≥–∏,

* –∏–∑–º–µ–Ω—è–ª–∏—Å—å –ª–∏ tagAlbum/tagArtist,

* –Ω–∞–π–¥–µ–Ω –ª–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Å —É—Å–ø–µ—à–Ω—ã–º–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏,

* —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–∏—Å–∫–∞.

–ö–Ω–∏–≥–∏, –Ω–µ —Ç—Ä–µ–±—É—é—â–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏, –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è, —á—Ç–æ –¥–∞—ë—Ç –æ–≥—Ä–æ–º–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö.

6Ô∏è‚É£ **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**

* –ª–æ–≥-—Ñ–∞–π–ª –æ—á–∏—â–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–µ–π

7Ô∏è‚É£ –ó–∞–ø—É—Å–∫ –≤ docker
```
version: "3.8"

services:
  audiobookshelf_namer:
    image: ghcr.io/druidblack/audiobookshelf_namer:latest
    container_name: audiobookshelf_namer
    restart: unless-stopped

    environment:
      # –ê–¥—Ä–µ—Å Audiobookshelf
      ABS_BASE_URL: "http://192.168.1.161:16378"

      # API-—Ç–æ–∫–µ–Ω Audiobookshelf
      ABS_TOKEN: "–ü–û–î–°–¢–ê–í–¨_–°–í–û–ô_ABS_API_TOKEN"

      # 1 = —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, –Ω–∏—á–µ–≥–æ –Ω–µ –ø–∏—Å–∞—Ç—å –≤ ABS
      # 0 = —Ä–µ–∞–ª—å–Ω–æ –≤–Ω–æ—Å–∏—Ç—å –ø—Ä–∞–≤–∫–∏
      ABS_DRY_RUN: "0"

      # –í–∫–ª—é—á–∞—Ç—å —Ü–µ–ø–æ—á–∫—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (FantLab ‚Üí Google Books ‚Üí Audible)
      ABS_USE_FANTLAB: "1"

      # –ü—É—Ç—å –∫ json —Å –∫—ç—à–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è ‚Äî –∫–ª–∞–¥—ë–º –≤ —Ç–æ–º, —á—Ç–æ –±—ã –Ω–µ —Ç–µ—Ä—è—Ç—å –º–µ–∂–¥—É —Ä–µ—Å—Ç–∞—Ä—Ç–∞–º–∏
      ABS_CACHE_FILE: "/data/abs_metadata_state.json"
      ABS_DISABLE_CACHE: "0"

      # –ü—É—Ç—å –∫ –ª–æ–≥ —Ñ–∞–π–ª—É
      ABS_LOG_FILE: "/data/fix_abs_metadata.log"

      # ID –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (UUID), –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É (–ø—É—Å—Ç–æ = –≤—Å–µ book)
      ABS_LIBRARY_ID: ""

      # –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏ (–º–∏–Ω—É—Ç—ã). 0 ‚Äî –æ–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥ –∏ –≤—ã—Ö–æ–¥.
      ABS_RUN_INTERVAL_MINUTES: "60"

      # –ñ–¥–∞—Ç—å –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤ Audiobookshelf
      ABS_WAIT_SCAN: "1"
      # –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–¥–∞—á ABS, —Å–µ–∫
      ABS_SCAN_CHECK_INTERVAL: "10"

    volumes:
      # –¢—É—Ç –±—É–¥–µ—Ç –∫—ç—à —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ, –µ—â—ë –∫–∞–∫–∏–µ-—Ç–æ —Ñ–∞–π–ª—ã
      - ./abs-namer-data:/data
